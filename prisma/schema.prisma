generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

enum TipoSinistro {
  Nenhum
  IndicioSinistro
  RecuperadoSinistro
  PequenaMonta
  MediaMonta
  GrandeMonta
  Sucata
}

model Leiloeiro {
  id              Int       @id @default(autoincrement())
  descricao       String
  dominio         String    @unique
  comissao        Float
  taxaAdm         Float
  taxaDespachante Float
  taxaVistoria    Float
  veiculos        Veiculo[]
}

model Veiculo {
  id            String       @id @default(uuid())
  modelo        String
  descricao     String       @default("")
  marca         String
  ano           String
  quilometragem Int
  sinistro      TipoSinistro @default(Nenhum)
  ipvaPago      Boolean      @default(true)
  numeroLote    Int?
  lanceInicial  Float
  lanceAtual    Float
  valorMercado  Float
  dataCaptura   DateTime
  dataLeilao    DateTime     @default(now())
  urlOrigem     String       @unique
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  leiloeiroId   Int
  leiloeiro     Leiloeiro    @relation(fields: [leiloeiroId], references: [id])
  patioUf       String?

  @@index([dataLeilao])
  @@index([sinistro])
  @@index([leiloeiroId])
}
